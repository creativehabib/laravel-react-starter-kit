import{r as m,K as C,m as E,j as s}from"./app-Dn8LgUSy.js";import{V as j,B as f}from"./index-D24vsSWi.js";import{D as F,a as S,b as I,c as L,d as N,e as y,f as B}from"./dialog-D3KYp0fX.js";import{I as O}from"./input-ByLncG1q.js";import{L as p,I as x}from"./label-CX52jKxS.js";import{T as A}from"./textarea-BWpVhGS6.js";import{T as R}from"./toggle-CHVtlzF_.js";import{L as U}from"./loader-circle-Bf5-APni.js";import"./index-B56UoQUR.js";import"./index-B_w6NhLA.js";function Q({designation:t,onClose:h}){const i=!!t,l=m.useRef(!1),[g,n]=m.useState(!1),{flash:r}=C().props,{data:d,setData:a,post:D,put:v,processing:c,errors:o,reset:u}=E({title:"",description:"",status:!0}),b=e=>{e.preventDefault();const T=i?v:D,w=i?route("designations.update",t==null?void 0:t.id):route("designations.store");T(w,{onSuccess:()=>{u(),n(!1),h()}})};return m.useEffect(()=>{t?(n(!0),a({title:t.title,description:t.description||"",status:t.status??!0})):Object.keys(o).length||(n(!1),u()),r!=null&&r.success&&!l.current&&(j.success(r.success),l.current=!0),r!=null&&r.error&&!l.current&&(j.error(r.error),l.current=!0)},[t,a,u,r,o]),s.jsxs(F,{open:g,onOpenChange:e=>{n(e),e||h()},children:[s.jsx(S,{asChild:!0,children:!i&&s.jsx(f,{variant:"outline",className:"cursor-pointer",children:"Add Designation"})}),s.jsxs(I,{className:"sm:max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs(L,{children:[s.jsxs(N,{children:[i?"Edit":"Add"," Designation"]}),s.jsx(y,{children:i?"Update the designation details.":"Provide a name and description."})]}),s.jsxs("form",{className:"grid gap-4",onSubmit:b,children:[s.jsxs("div",{children:[s.jsx(p,{htmlFor:"title",children:"Title"}),s.jsx(O,{id:"title",value:d.title,onChange:e=>a("title",e.target.value),disabled:c}),s.jsx(x,{message:o.title})]}),s.jsxs("div",{children:[s.jsx(p,{htmlFor:"description",children:"Description"}),s.jsx(A,{id:"description",value:d.description,onChange:e=>a("description",e.target.value),disabled:c,rows:4}),s.jsx(x,{message:o.description})]}),s.jsxs("div",{children:[s.jsx(p,{htmlFor:"status",children:"Status"}),s.jsx(R,{initial:d.status,onChange:e=>a("status",e)}),s.jsx(x,{message:o.status})]}),s.jsx(B,{children:s.jsxs(f,{type:"submit",disabled:c,children:[c&&s.jsx(U,{className:"animate-spin h-4 w-4 mr-2"}),i?"Update":"Save"]})})]})]})]})}export{Q as DialogDemo};
