import{c as q,g as pe,K as ve,r as O,S as N,j as e,L as Te,$ as J}from"./app-BPPluLms.js";import{S as ye,T as Se,I as _e,D as qe}from"./delete-dialog-D91eAtDK.js";import{B as w}from"./button-Bl37RfZL.js";import{C as Oe,c as Ie}from"./card-hNdNqk2d.js";import{I as Re}from"./input-DiN9sY6S.js";import{S as Ce,T as Ne,a as we,b as Q,c as p,d as Ee,e as v}from"./table-wtasQl2D.js";import{A as De}from"./app-layout-BvDj4kJS.js";import{V as ke}from"./index-D8csU6x1.js";import{T as Le}from"./toggle-DXLkdKpH.js";import"./createLucideIcon-UDTa4L3m.js";import"./dialog-xJEhFihv.js";import"./index-CutaTEFk.js";import"./index-CxsHAYqg.js";import"./x-rr5Wle3y.js";import"./index-B87jN0Xn.js";var E,Y;function fe(){if(Y)return E;Y=1;function t(r){var a=typeof r;return r!=null&&(a=="object"||a=="function")}return E=t,E}var D,Z;function Pe(){if(Z)return D;Z=1;var t=typeof q=="object"&&q&&q.Object===Object&&q;return D=t,D}var k,ee;function me(){if(ee)return k;ee=1;var t=Pe(),r=typeof self=="object"&&self&&self.Object===Object&&self,a=t||r||Function("return this")();return k=a,k}var L,re;function Ge(){if(re)return L;re=1;var t=me(),r=function(){return t.Date.now()};return L=r,L}var P,te;function Ae(){if(te)return P;te=1;var t=/\s/;function r(a){for(var i=a.length;i--&&t.test(a.charAt(i)););return i}return P=r,P}var G,ne;function $e(){if(ne)return G;ne=1;var t=Ae(),r=/^\s+/;function a(i){return i&&i.slice(0,t(i)+1).replace(r,"")}return G=a,G}var A,ie;function be(){if(ie)return A;ie=1;var t=me(),r=t.Symbol;return A=r,A}var $,ae;function Be(){if(ae)return $;ae=1;var t=be(),r=Object.prototype,a=r.hasOwnProperty,i=r.toString,c=t?t.toStringTag:void 0;function h(l){var d=a.call(l,c),f=l[c];try{l[c]=void 0;var n=!0}catch{}var m=i.call(l);return n&&(d?l[c]=f:delete l[c]),m}return $=h,$}var B,se;function We(){if(se)return B;se=1;var t=Object.prototype,r=t.toString;function a(i){return r.call(i)}return B=a,B}var W,oe;function ze(){if(oe)return W;oe=1;var t=be(),r=Be(),a=We(),i="[object Null]",c="[object Undefined]",h=t?t.toStringTag:void 0;function l(d){return d==null?d===void 0?c:i:h&&h in Object(d)?r(d):a(d)}return W=l,W}var z,ce;function Fe(){if(ce)return z;ce=1;function t(r){return r!=null&&typeof r=="object"}return z=t,z}var F,ue;function Me(){if(ue)return F;ue=1;var t=ze(),r=Fe(),a="[object Symbol]";function i(c){return typeof c=="symbol"||r(c)&&t(c)==a}return F=i,F}var M,le;function He(){if(le)return M;le=1;var t=$e(),r=fe(),a=Me(),i=NaN,c=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function f(n){if(typeof n=="number")return n;if(a(n))return i;if(r(n)){var m=typeof n.valueOf=="function"?n.valueOf():n;n=r(m)?m+"":m}if(typeof n!="string")return n===0?n:+n;n=t(n);var b=h.test(n);return b||l.test(n)?d(n.slice(2),b?2:8):c.test(n)?i:+n}return M=f,M}var H,de;function Ue(){if(de)return H;de=1;var t=fe(),r=Ge(),a=He(),i="Expected a function",c=Math.max,h=Math.min;function l(d,f,n){var m,b,s,j,u,x,T=0,U=!1,y=!1,I=!0;if(typeof d!="function")throw new TypeError(i);f=a(f)||0,t(n)&&(U=!!n.leading,y="maxWait"in n,s=y?c(a(n.maxWait)||0,f):s,I="trailing"in n?!!n.trailing:I);function R(o){var g=m,S=b;return m=b=void 0,T=o,j=d.apply(S,g),j}function he(o){return T=o,u=setTimeout(_,f),U?R(o):j}function je(o){var g=o-x,S=o-T,X=f-g;return y?h(X,s-S):X}function V(o){var g=o-x,S=o-T;return x===void 0||g>=f||g<0||y&&S>=s}function _(){var o=r();if(V(o))return K(o);u=setTimeout(_,je(o))}function K(o){return u=void 0,I&&m?R(o):(m=b=void 0,j)}function ge(){u!==void 0&&clearTimeout(u),T=0,m=x=b=u=void 0}function xe(){return u===void 0?j:K(r())}function C(){var o=r(),g=V(o);if(m=arguments,b=this,x=o,g){if(u===void 0)return he(x);if(y)return clearTimeout(u),u=setTimeout(_,f),R(x)}return u===void 0&&(u=setTimeout(_,f)),j}return C.cancel=ge,C.flush=xe,C}return H=l,H}var Ve=Ue();const Ke=pe(Ve),Xe=[{title:"Posts",href:"/posts"}];function dr({posts:t}){var b;const{flash:r}=ve().props;O.useEffect(()=>{r.success&&ke.success(r.success)},[r]);const[a,i]=O.useState(!1),[c,h]=O.useState(null),l=O.useRef(Ke(s=>{N.get("/posts",{search:s},{preserveState:!0,replace:!0})},500)).current,d=s=>{h(s),i(!0)};function f(s){const j=s.target.value;l(j)}const n=()=>{c!==null&&(N.delete(route("posts.destroy",c),{preserveScroll:!0,preserveState:!0,only:["posts","flash"]}),i(!1))},m=s=>{N.put(route("posts.toggle-status",s),{},{preserveScroll:!0,preserveState:!0,only:["posts","flash"]})};return e.jsxs(e.Fragment,{children:[e.jsxs(De,{breadcrumbs:Xe,children:[e.jsx(Te,{title:"Posts"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{className:"rounded border p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[e.jsxs("div",{className:"relative w-full sm:w-1/3",children:[e.jsx(Re,{id:"search",className:"peer ps-9",placeholder:"Search...",type:"search",onChange:f}),e.jsx("div",{className:"text-muted-foreground/80 pointer-events-none absolute inset-y-0 start-0 flex items-center justify-center ps-3 peer-disabled:opacity-50",children:e.jsx(Ce,{size:16,"aria-hidden":"true"})})]}),e.jsx(w,{children:e.jsx(J,{href:"/posts/create",prefetch:!0,children:"Create Post"})})]}),e.jsx(Oe,{children:e.jsx(Ie,{children:e.jsxs(Ne,{children:[e.jsx(we,{children:e.jsxs(Q,{children:[e.jsx(p,{children:"#"}),e.jsx(p,{children:"Image"}),e.jsx(p,{children:"Title"}),e.jsx(p,{children:"Content"}),e.jsx(p,{children:"Category"}),e.jsx(p,{children:"Status"}),e.jsx(p,{children:"Actions"})]})}),e.jsx(Ee,{children:(b=t.data)==null?void 0:b.map((s,j)=>{var u;return e.jsxs(Q,{children:[e.jsx(v,{children:j+1}),e.jsx(v,{children:e.jsx("img",{src:`/storage/${((u=s.media)==null?void 0:u.path)||""}`,alt:s.title,className:"w-14 rounded"})}),e.jsx(v,{children:s.title}),e.jsx(v,{children:s.content.substring(0,50)}),e.jsx(v,{children:s.category}),e.jsx(v,{children:e.jsx(Le,{initial:s.status,onChange:()=>m(s.id)})}),e.jsxs(v,{className:"space-x-1",children:[e.jsx(w,{asChild:!0,size:"sm",children:e.jsx(J,{href:`/posts/${s.id}/edit`,prefetch:!0,children:e.jsx(ye,{size:16})})}),e.jsx(w,{size:"sm",className:"bg-red-500 hover:bg-red-400 cursor-pointer",onClick:()=>d(s.id),children:e.jsx(Se,{size:16})})]})]},s.id)})})]})})}),e.jsx(_e,{meta:t.meta})]})})]}),e.jsx(qe,{open:a,onClose:()=>i(!1),onConfirm:n,title:"Confirm Deletion",description:"Are you sure you want to delete this post?"})]})}export{dr as default};
