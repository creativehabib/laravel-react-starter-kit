import{r as v,m as T,j as e}from"./app-DD-3xnGx.js";import{B as p}from"./button-Ck2ugyo2.js";import{D as A,a as I,b as P,c as O,d as L,e as U,f as y,g as z}from"./drawer-Dc4Q5iki.js";import{I as n}from"./input-CQyW-RbQ.js";import{L as u,I as h}from"./label-BjUloNoc.js";import{T as g}from"./textarea-BFKAANZn.js";import{T as G}from"./toggle-yKGpXaV_.js";import{t as H}from"./employee-DLYSG5F-.js";import{S as J}from"./media-image-select-x3RCfKWu.js";import"./index-ByRrjyUA.js";import"./index-CBfI6Vir.js";import"./media-manager-CUhC--cj.js";import"./dialog-Dj8xH4hf.js";import"./index-Brqn_xRr.js";import"./delete-dialog-rFwyEHc-.js";import"./search-Bi1I37If.js";import"./loader-circle-DUiuuZnR.js";const R={name:"",email:"",phone:"",position:"",department_id:"",designation_id:"",user_id:"",pf_number:"",joining_date:"",date_of_birth:"",blood_group:"",emergency_contact:"",bank_account_number:"",bank_name:"",verify:"",media_id:null,status:!0,present_address:"",permanent_address:"",about:""};function oe({employee:a=null,departments:N=[],designations:D=[],media:x=[],triggerLabel:w,onClose:m}){const r=!!a,[C,o]=v.useState(!1),{data:s,setData:l,post:S,put:F,processing:_,reset:d,errors:i}=T(R),E=[{id:"name",label:"Name",type:"text",component:n},{id:"email",label:"Email",type:"email",component:n},{id:"position",label:"Position",type:"text",component:n},{id:"phone",label:"Phone",type:"text",component:n},{id:"present_address",label:"Present Address",component:g},{id:"permanent_address",label:"Permanent Address",component:g},{id:"bank_account_number",label:"Bank Account Number",type:"text",component:n},{id:"bank_name",label:"Bank Name",type:"text",component:n},{id:"pf_number",label:"PF Number",type:"text",component:n},{id:"date_of_birth",label:"Date of Birth",type:"date",component:n},{id:"joining_date",label:"Joining Date",type:"date",component:n},{id:"blood_group",label:"Blood Group",type:"text",component:n},{id:"verify",label:"Verify",type:"text",component:n},{id:"emergency_contact",label:"Emergency Contact",type:"text",component:n},{id:"about",label:"About",component:g}];v.useEffect(()=>{a?(o(!0),l(H(a))):Object.keys(i).length||(o(!1),d())},[a,i,d,l]);const b=t=>{const{name:c,value:j}=t.target;l(c,j)},k=t=>{t.preventDefault();const c=r?F:S,j=r?route("employees.update",a==null?void 0:a.id):route("employees.store");c(j,{onSuccess:()=>{d(),o(!1),m()}})},B=t=>{(t==null?void 0:t.id)!==void 0&&l("media_id",(t==null?void 0:t.id)??null)},f=()=>{d(),o(!1),m()};return e.jsxs(A,{open:C,onOpenChange:t=>{o(t),t||m()},direction:"right",children:[e.jsx(I,{asChild:!0,children:e.jsx(p,{className:"cursor-pointer",variant:"outline",onClick:()=>{m(),d()},children:w})}),e.jsx(P,{className:"h-screen w-full ml-auto",children:e.jsxs("form",{onSubmit:k,className:"flex flex-col h-full",children:[e.jsx(O,{className:"border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(L,{children:[r?"Edit":"New"," Employee"]}),e.jsx(U,{children:r?"Update employee details.":"Fill in employee details."})]}),e.jsx(y,{asChild:!0,children:e.jsx(p,{size:"sm",className:"cursor-pointer",variant:"ghost",onClick:f,children:"âœ•"})})]})}),e.jsxs("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[E.map(t=>{const c=t.component;return e.jsxs("div",{children:[e.jsx(u,{htmlFor:t.id,className:"mb-4",children:t.label}),e.jsx(c,{id:t.id,name:t.id,value:s[t.id],onChange:b,type:t.type||"text"}),e.jsx(h,{message:i[t.id]})]},t.id)}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"department_id",children:"Department"}),e.jsxs("select",{id:"department_id",name:"department_id",value:s.department_id,onChange:b,className:"w-full border rounded-md p-2",children:[e.jsx("option",{value:"",children:"Select Department"}),N.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(h,{message:i.department_id})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"designation_id",children:"Designation"}),e.jsxs("select",{id:"designation_id",name:"designation_id",value:s.designation_id,onChange:b,className:"w-full border rounded-md p-2",children:[e.jsx("option",{value:"",children:"Select Designation"}),D.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))]}),e.jsx(h,{message:i.designation_id})]}),e.jsx("div",{className:"mt-4",children:e.jsx(J,{onSelect:B,initial:Array.isArray(x)&&x.length>0&&s.media_id?x.find(t=>t.id===Number(s.media_id)):void 0})}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{children:[e.jsx(u,{htmlFor:"status",children:"Status"}),e.jsx(G,{initial:!!Number(s.status),onChange:t=>l("status",t)}),e.jsx(h,{message:i.status})]})})]}),e.jsxs(z,{className:"border-t pt-4",children:[e.jsx(p,{type:"submit",disabled:_,className:"cursor-pointer",variant:"outline",children:_?"Saving...":r?"Update":"Save"}),e.jsx(y,{asChild:!0,children:e.jsx(p,{type:"button",variant:"outline",onClick:f,className:"cursor-pointer",children:"Cancel"})})]})]})})]})}export{oe as EmployeeDrawer};
