import{r as o,K as C,S as c,j as e,L as T,$ as v}from"./app-BE3jW3uN.js";import{V as N}from"./index-DHXFUDIu.js";import{d as D}from"./debounce-BEvoF7qA.js";import{A as w}from"./app-layout-DvWkxdXA.js";import{I}from"./input-mZcnD0xA.js";import{B as P}from"./button-6qztjmr2.js";import{C as A,c as E}from"./card-C-2VTrwq.js";import{T as z,a as B,b as p,c as t,d as F,e as r}from"./table-CVaKAUcu.js";import{g as L}from"./employee-C_ZQLp6F.js";import{T as R}from"./toggle-D-woffNC.js";import{S as k,T as q,I as H}from"./inertia-pagination-iKyv5OIu.js";import{D as V}from"./delete-dialog-DFuTORB_.js";import{S as $}from"./search-CXLL6GY9.js";import"./index-DlbFKtQ0.js";import"./index-BsBX4B_F.js";import"./index-xRORodtm.js";import"./floating-ui.react-dom-HEeyXpNB.js";import"./app-logo-icon-Dm77PiVG.js";import"./dialog-BDUrebJL.js";const K=[{title:"Posts",href:"/posts"}];function ue(){var m;const[O,U]=o.useState(!1),[G,J]=o.useState(null),{flash:l,posts:n,media:M}=C().props;o.useEffect(()=>{l.success&&N.success(l.success)},[l]);const[x,i]=o.useState(!1),[d,j]=o.useState(null),f=o.useRef(D(s=>{const a={};s.trim()!==""&&(a.search=s),c.get("/posts",a,{preserveState:!0,replace:!0})},500)).current,g=s=>{j(s),i(!0)},b=()=>{d!==null&&(c.delete(route("posts.destroy",d),{preserveScroll:!0,preserveState:!0,only:["posts","flash"]}),i(!1))};function S(s){const a=s.target.value;f(a)}const y=s=>{c.put(route("posts.toggle-status",s),{},{preserveScroll:!0,preserveState:!0,only:["posts","flash"]})};return e.jsxs(e.Fragment,{children:[e.jsxs(w,{breadcrumbs:K,children:[e.jsx(T,{title:"Posts"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"relative w-full sm:w-1/3",children:[e.jsx(I,{id:"search",className:"peer ps-9",placeholder:"Search...",type:"text",onChange:S}),e.jsx("div",{className:"text-muted-foreground/80 pointer-events-none absolute inset-y-0 start-0 flex items-center justify-center ps-3 peer-disabled:opacity-50",children:e.jsx($,{size:16,"aria-hidden":"true"})})]}),e.jsx(P,{children:e.jsx(v,{href:route("posts.create"),className:"text-white",children:"Add Post"})})]}),e.jsx(A,{children:e.jsx(E,{children:e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(p,{children:[e.jsx(t,{children:"#"}),e.jsx(t,{children:"Image"}),e.jsx(t,{children:"Title"}),e.jsx(t,{children:"Content"}),e.jsx(t,{children:"Category"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(F,{children:n.data.length>0?(m=n.data)==null?void 0:m.map((s,a)=>{var h,u;return e.jsxs(p,{children:[e.jsx(r,{children:a+1}),e.jsx(r,{children:e.jsx("img",{src:L((h=s.media)==null?void 0:h.path,400,300,((u=s.media)==null?void 0:u.name)||"No Image"),alt:s.title,className:"w-14 rounded"})}),e.jsx(r,{children:s.title}),e.jsx(r,{children:s.content.substring(0,50)}),e.jsx(r,{children:s.category}),e.jsx(r,{children:e.jsx(R,{initial:s.status,onChange:()=>y(s.id)})}),e.jsxs(r,{className:"space-x-1",children:[e.jsx("button",{className:"rounded bg-blue-500 cursor-pointer px-3 py-1 rounded text-white hover:bg-blue-600",children:e.jsx(k,{size:16})}),e.jsx("button",{className:"bg-red-500 hover:bg-red-400 cursor-pointer rounded px-3 py-1 text-white",onClick:()=>g(s.id),children:e.jsx(q,{size:16})})]})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-4",children:"No posts found."})})})]})})}),e.jsx(H,{meta:n.meta})]})]}),e.jsx(V,{open:x,onClose:()=>i(!1),onConfirm:b,title:"Confirm Deletion",description:"Are you sure you want to delete this post?"})]})}export{ue as default};
