import{K as D,r as l,j as e,L as S,S as c}from"./app-BkEg4a0J.js";import{A as v}from"./app-layout-B9YWXUNA.js";import{V as p}from"./index-DR2gHj0T.js";import{D as E}from"./delete-dialog-DmiPXBf6.js";import{S as C,T as w,I as T}from"./inertia-pagination-rkwwOrr5.js";import{T as A}from"./toggle-GgE8bsjO.js";import{EmployeeDrawer as L}from"./form-Cub1p1Jo.js";import"./button-Daj0ygBl.js";import"./index-CPTagznA.js";import"./index-C7oET5JS.js";import"./x-Jc_pdHZS.js";import"./createLucideIcon-_8n2f-is.js";import"./index-BwNFFPiR.js";import"./dialog-LHxwGBeK.js";import"./input-DlgA0gqc.js";import"./label-Dz54cYY1.js";import"./textarea-Cmu_g-Vm.js";import"./employee-0YtnMp96.js";const k=[{title:"Employees",href:"/employees"}];function X(){const{flash:s,employees:r,departments:m,designations:x}=D().props,[h,a]=l.useState(null),[u,o]=l.useState(!1),[n,j]=l.useState(null),b=t=>a(t),f=t=>{j(t),o(!0)},g=()=>{n!==null&&(c.delete(route("employees.destroy",n),{preserveScroll:!0,preserveState:!0,only:["employees","flash"]}),o(!1))},y=t=>{c.post(route("employees.toggle-status",t),{},{only:["employees","flash"],preserveScroll:!0,preserveState:!0})};return l.useEffect(()=>{s!=null&&s.success&&p.success(s.success),s!=null&&s.error&&p.error(s.error)},[s]),e.jsxs(e.Fragment,{children:[e.jsxs(v,{breadcrumbs:k,children:[e.jsx(S,{title:"Employees"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx("div",{className:"ml-auto",children:e.jsx(L,{employee:h,triggerLabel:"Add Employee",departments:m,designations:x,onClose:()=>a(null)})}),e.jsxs("div",{className:"overflow-hidden rounded-lg border",children:[e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-700 text-white",children:[e.jsx("th",{className:"border p-2",children:"#"}),e.jsx("th",{className:"border p-2 text-start",children:"Name"}),e.jsx("th",{className:"border p-2 text-start",children:"Department"}),e.jsx("th",{className:"border p-2",children:"Designation"}),e.jsx("th",{className:"border p-2",children:"Status"}),e.jsx("th",{className:"border p-2",children:"Created At"}),e.jsx("th",{className:"border p-2",children:"Actions"})]})}),e.jsx("tbody",{children:r.data.length>0?r.data.map((t,N)=>{var i,d;return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:r.meta.from+N}),e.jsx("td",{className:"border px-2 py-1",children:t.name}),e.jsx("td",{className:"border px-2 py-1",children:((i=t.department)==null?void 0:i.name)??"—"}),e.jsx("td",{className:"border px-2 py-1",children:((d=t.designation)==null?void 0:d.title)??"—"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(A,{initial:t.status,onChange:()=>y(t.id)})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:t.created_at}),e.jsxs("td",{className:"border px-2 py-1 text-center space-x-1",children:[e.jsx("button",{className:"rounded bg-blue-500 cursor-pointer px-3 py-1 text-white hover:bg-blue-600",onClick:()=>b(t),children:e.jsx(C,{size:16})}),e.jsx("button",{className:"rounded bg-red-500 cursor-pointer px-3 py-1 text-white hover:bg-red-600",onClick:()=>f(t.id),children:e.jsx(w,{size:16})})]})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"border px-2 py-4 text-center",children:"No employee found."})})})]}),e.jsx("div",{className:"mb-2",children:e.jsx(T,{meta:r.meta})})]})]})]}),e.jsx(E,{open:u,onClose:()=>o(!1),onConfirm:g,title:"Confirm Deletion",description:"Are you sure you want to delete this employee?"})]})}export{X as default};
