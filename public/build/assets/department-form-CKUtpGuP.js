import{r as u,K as E,m as T,j as s}from"./app-B4-l61B1.js";import{V as g,B as j}from"./index-CADOWZ_U.js";import{D as F,a as N,b as S,c as I,d as L,e as y,f as B}from"./dialog-CFGWI2Ep.js";import{I as O}from"./input-C7zNWFaU.js";import{L as p,I as x}from"./label-J6zXEcJc.js";import{T as A}from"./textarea-DCUzj2Xt.js";import{T as R}from"./toggle-zB4gUdL4.js";import{L as U}from"./loader-circle-DLdg69kX.js";import"./index-CiPfzvxY.js";import"./index-KxI8f3rk.js";import"./x-BlnGtIgw.js";import"./createLucideIcon-C7Z9kHqq.js";function X({department:r,onClose:h}){const i=!!r,n=u.useRef(!1),[f,c]=u.useState(!1),{flash:t}=E().props,{data:d,setData:a,post:D,put:v,processing:l,errors:o,reset:m}=T({name:"",description:"",status:!0}),b=e=>{e.preventDefault();const w=i?v:D,C=i?route("departments.update",r==null?void 0:r.id):route("departments.store");w(C,{onSuccess:()=>{m(),c(!1),h()}})};return u.useEffect(()=>{r?(c(!0),a({name:r.name,description:r.description||"",status:r.status??!0})):Object.keys(o).length||(c(!1),m()),t!=null&&t.success&&!n.current&&(g.success(t.success),n.current=!0),t!=null&&t.error&&!n.current&&(g.error(t.error),n.current=!0)},[r,a,m,t,o]),s.jsxs(F,{open:f,onOpenChange:e=>{c(e),e||h()},children:[s.jsx(N,{asChild:!0,children:!i&&s.jsx(j,{variant:"outline",className:"cursor-pointer",children:"Add Department"})}),s.jsxs(S,{className:"sm:max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs(I,{children:[s.jsxs(L,{children:[i?"Edit":"Add"," Department"]}),s.jsx(y,{children:i?"Update the department details.":"Provide a name and description."})]}),s.jsxs("form",{className:"grid gap-4",onSubmit:b,children:[s.jsxs("div",{children:[s.jsx(p,{htmlFor:"name",children:"Name"}),s.jsx(O,{id:"name",value:d.name,onChange:e=>a("name",e.target.value),disabled:l}),s.jsx(x,{message:o.name})]}),s.jsxs("div",{children:[s.jsx(p,{htmlFor:"description",children:"Description"}),s.jsx(A,{id:"description",value:d.description,onChange:e=>a("description",e.target.value),disabled:l,rows:4}),s.jsx(x,{message:o.description})]}),s.jsxs("div",{children:[s.jsx(p,{htmlFor:"status",children:"Status"}),s.jsx(R,{initial:d.status,onChange:e=>a("status",e)}),s.jsx(x,{message:o.status})]}),s.jsx(B,{children:s.jsxs(j,{type:"submit",disabled:l,children:[l&&s.jsx(U,{className:"animate-spin h-4 w-4 mr-2"}),i?"Update":"Save"]})})]})]})]})}export{X as DialogDemo};
