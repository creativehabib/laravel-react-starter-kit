import{r as m,K as E,m as T,j as s}from"./app-Dn8LgUSy.js";import{V as g,B as j}from"./index-D24vsSWi.js";import{D as F,a as N,b as S,c as I,d as L,e as y,f as B}from"./dialog-D3KYp0fX.js";import{I as O}from"./input-ByLncG1q.js";import{L as p,I as x}from"./label-CX52jKxS.js";import{T as A}from"./textarea-BWpVhGS6.js";import{T as R}from"./toggle-CHVtlzF_.js";import{L as U}from"./loader-circle-Bf5-APni.js";import"./index-B56UoQUR.js";import"./index-B_w6NhLA.js";function Q({department:r,onClose:h}){const a=!!r,n=m.useRef(!1),[f,c]=m.useState(!1),{flash:t}=E().props,{data:d,setData:i,post:D,put:v,processing:l,errors:o,reset:u}=T({name:"",description:"",status:!0}),b=e=>{e.preventDefault();const w=a?v:D,C=a?route("departments.update",r==null?void 0:r.id):route("departments.store");w(C,{onSuccess:()=>{u(),c(!1),h()}})};return m.useEffect(()=>{r?(c(!0),i({name:r.name,description:r.description||"",status:r.status??!0})):Object.keys(o).length||(c(!1),u()),t!=null&&t.success&&!n.current&&(g.success(t.success),n.current=!0),t!=null&&t.error&&!n.current&&(g.error(t.error),n.current=!0)},[r,i,u,t,o]),s.jsxs(F,{open:f,onOpenChange:e=>{c(e),e||h()},children:[s.jsx(N,{asChild:!0,children:!a&&s.jsx(j,{variant:"outline",className:"cursor-pointer",children:"Add Department"})}),s.jsxs(S,{className:"sm:max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs(I,{children:[s.jsxs(L,{children:[a?"Edit":"Add"," Department"]}),s.jsx(y,{children:a?"Update the department details.":"Provide a name and description."})]}),s.jsxs("form",{className:"grid gap-4",onSubmit:b,children:[s.jsxs("div",{children:[s.jsx(p,{htmlFor:"name",children:"Name"}),s.jsx(O,{id:"name",value:d.name,onChange:e=>i("name",e.target.value),disabled:l}),s.jsx(x,{message:o.name})]}),s.jsxs("div",{children:[s.jsx(p,{htmlFor:"description",children:"Description"}),s.jsx(A,{id:"description",value:d.description,onChange:e=>i("description",e.target.value),disabled:l,rows:4}),s.jsx(x,{message:o.description})]}),s.jsxs("div",{children:[s.jsx(p,{htmlFor:"status",children:"Status"}),s.jsx(R,{initial:d.status,onChange:e=>i("status",e)}),s.jsx(x,{message:o.status})]}),s.jsx(B,{children:s.jsxs(j,{type:"submit",disabled:l,children:[l&&s.jsx(U,{className:"animate-spin h-4 w-4 mr-2"}),a?"Update":"Save"]})})]})]})]})}export{Q as DialogDemo};
