import{r as p,m as b,j as s}from"./app-pVmesu-n.js";import{B as h}from"./button-BPOJfW_O.js";import{D as C,a as E,b as N,c as T,d as w,e as S,f as F}from"./dialog-CW_B7_we.js";import{I}from"./input-DZIjnAwi.js";import{L as m,I as c}from"./label-COH_WopQ.js";import{T as L}from"./textarea-BdNxz80-.js";import{T as y}from"./toggle-DAKWXj-V.js";import{L as B}from"./loader-circle-CgG6m-NZ.js";import"./index-CLMFwZzz.js";import"./index-CnV378te.js";function J({department:a,onClose:u}){const t=!!a,[x,o]=p.useState(!1),{data:l,setData:i,post:g,put:j,processing:n,errors:r,reset:d}=b({name:"",description:"",status:!0}),f=e=>{e.preventDefault();const D=t?j:g,v=t?route("departments.update",a==null?void 0:a.id):route("departments.store");D(v,{onSuccess:()=>{d(),o(!1),u()}})};return p.useEffect(()=>{a?(o(!0),i({name:a.name,description:a.description||"",status:a.status??!0})):Object.keys(r).length||(o(!1),d())},[a,i,d,r]),s.jsxs(C,{open:x,onOpenChange:e=>{o(e),e||u()},children:[s.jsx(E,{asChild:!0,children:!t&&s.jsx(h,{variant:"outline",className:"cursor-pointer",children:"Add Department"})}),s.jsxs(N,{className:"sm:max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs(T,{children:[s.jsxs(w,{children:[t?"Edit":"Add"," Department"]}),s.jsx(S,{children:t?"Update the department details.":"Provide a name and description."})]}),s.jsxs("form",{className:"grid gap-4",onSubmit:f,children:[s.jsxs("div",{children:[s.jsx(m,{htmlFor:"name",children:"Name"}),s.jsx(I,{id:"name",value:l.name,onChange:e=>i("name",e.target.value),disabled:n}),s.jsx(c,{message:r.name})]}),s.jsxs("div",{children:[s.jsx(m,{htmlFor:"description",children:"Description"}),s.jsx(L,{id:"description",value:l.description,onChange:e=>i("description",e.target.value),disabled:n,rows:4}),s.jsx(c,{message:r.description})]}),s.jsxs("div",{children:[s.jsx(m,{htmlFor:"status",children:"Status"}),s.jsx(y,{initial:!!Number(l.status),onChange:e=>i("status",e)}),s.jsx(c,{message:r.status})]}),s.jsx(F,{children:s.jsxs(h,{type:"submit",disabled:n,children:[n&&s.jsx(B,{className:"animate-spin h-4 w-4 mr-2"}),t?"Update":"Save"]})})]})]})]})}export{J as DialogDemo};
