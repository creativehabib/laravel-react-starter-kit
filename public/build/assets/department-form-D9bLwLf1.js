import{r as p,m as b,j as s}from"./app-BItSAfHF.js";import{B as h}from"./button-YkZMCIIV.js";import{D as C,a as E,b as N,c as T,d as w,e as S,f as F}from"./dialog-C4PgODwe.js";import{I}from"./input-BcpuqCNP.js";import{L as d,I as c}from"./label-D1EeytcA.js";import{T as L}from"./textarea-1pXd6_i4.js";import{T as y}from"./toggle-tmI6RdTi.js";import{L as B}from"./loader-circle-C98F5C_7.js";import"./index-CcEMnfTm.js";import"./index-CzOI2JqH.js";import"./x-Cth7qeIw.js";import"./createLucideIcon-CIYVBwCZ.js";function M({department:t,onClose:u}){const a=!!t,[x,o]=p.useState(!1),{data:l,setData:i,post:g,put:j,processing:n,errors:r,reset:m}=b({name:"",description:"",status:!0}),f=e=>{e.preventDefault();const D=a?j:g,v=a?route("departments.update",t==null?void 0:t.id):route("departments.store");D(v,{onSuccess:()=>{m(),o(!1),u()}})};return p.useEffect(()=>{t?(o(!0),i({name:t.name,description:t.description||"",status:t.status??!0})):Object.keys(r).length||(o(!1),m())},[t,i,m,r]),s.jsxs(C,{open:x,onOpenChange:e=>{o(e),e||u()},children:[s.jsx(E,{asChild:!0,children:!a&&s.jsx(h,{variant:"outline",className:"cursor-pointer",children:"Add Department"})}),s.jsxs(N,{className:"sm:max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs(T,{children:[s.jsxs(w,{children:[a?"Edit":"Add"," Department"]}),s.jsx(S,{children:a?"Update the department details.":"Provide a name and description."})]}),s.jsxs("form",{className:"grid gap-4",onSubmit:f,children:[s.jsxs("div",{children:[s.jsx(d,{htmlFor:"name",children:"Name"}),s.jsx(I,{id:"name",value:l.name,onChange:e=>i("name",e.target.value),disabled:n}),s.jsx(c,{message:r.name})]}),s.jsxs("div",{children:[s.jsx(d,{htmlFor:"description",children:"Description"}),s.jsx(L,{id:"description",value:l.description,onChange:e=>i("description",e.target.value),disabled:n,rows:4}),s.jsx(c,{message:r.description})]}),s.jsxs("div",{children:[s.jsx(d,{htmlFor:"status",children:"Status"}),s.jsx(y,{initial:!!Number(l.status),onChange:e=>i("status",e)}),s.jsx(c,{message:r.status})]}),s.jsx(F,{children:s.jsxs(h,{type:"submit",disabled:n,children:[n&&s.jsx(B,{className:"animate-spin h-4 w-4 mr-2"}),a?"Update":"Save"]})})]})]})]})}export{M as DialogDemo};
