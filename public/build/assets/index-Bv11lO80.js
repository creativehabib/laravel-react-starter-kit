import{K as C,r as a,j as e,L as w,S as x}from"./app-EWjb2TbH.js";import{A as T}from"./app-layout-BsaWVIfK.js";import{V as h}from"./index-CFGHqF-o.js";import{D as A}from"./delete-dialog-bQaHQxkE.js";import{S as I,T as L,I as k}from"./inertia-pagination-Bs00JQfH.js";import{T as z}from"./toggle-DplP7hOH.js";import{EmployeeDrawer as P}from"./form-D-PaSvWz.js";import{g as V}from"./employee-C_ZQLp6F.js";import"./button-CfNS5PFM.js";import"./index-PxJALgzO.js";import"./index-DfxX1HNH.js";import"./index-DT_scs80.js";import"./app-logo-icon-BwRIzn8w.js";import"./dialog-BLWqt19D.js";import"./input-CHvz4l7Z.js";import"./label-CKgP0lgd.js";import"./textarea-DTUN4432.js";import"./media-image-select-Ck4LpRIG.js";import"./media-manager-CgTYERCm.js";import"./loader-circle-ChuUd6CX.js";const q=[{title:"Employees",href:"/employees"}];function re(){const{flash:s,employees:r,departments:u,designations:j,media:b}=C().props,[g,o]=a.useState(null),[f,l]=a.useState(!1),[i,N]=a.useState(null),y=t=>o(t),D=t=>{N(t),l(!0)},S=()=>{i!==null&&(x.delete(route("employees.destroy",i),{preserveScroll:!0,preserveState:!0,only:["employees","flash"]}),l(!1))},v=t=>{x.post(route("employees.toggle-status",t),{},{only:["employees","flash"],preserveScroll:!0,preserveState:!0})};return a.useEffect(()=>{s!=null&&s.success&&h.success(s.success),s!=null&&s.error&&h.error(s.error)},[s]),e.jsxs(e.Fragment,{children:[e.jsxs(T,{breadcrumbs:q,children:[e.jsx(w,{title:"Employees"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx("div",{className:"ml-auto",children:e.jsx(P,{employee:g,triggerLabel:"Add Employee",departments:u,designations:j,media:b,onClose:()=>o(null)})}),e.jsxs("div",{className:"overflow-hidden rounded-lg border",children:[e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-700 text-white",children:[e.jsx("th",{className:"border p-2",children:"#"}),e.jsx("th",{className:"border p-2",children:"Image"}),e.jsx("th",{className:"border p-2 text-start",children:"Name"}),e.jsx("th",{className:"border p-2 text-start",children:"Department"}),e.jsx("th",{className:"border p-2",children:"Designation"}),e.jsx("th",{className:"border p-2",children:"Status"}),e.jsx("th",{className:"border p-2",children:"Created At"}),e.jsx("th",{className:"border p-2",children:"Actions"})]})}),e.jsx("tbody",{children:r.data.length>0?r.data.map((t,E)=>{var n,d,c,m,p;return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:r.meta.from+E}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("img",{src:V((n=t.media)==null?void 0:n.path,400,300,((d=t.media)==null?void 0:d.name)||"No Image"),alt:(c=t.media)==null?void 0:c.name,className:"h-10 w-10 rounded-full"})}),e.jsx("td",{className:"border px-2 py-1",children:t.name}),e.jsx("td",{className:"border px-2 py-1",children:((m=t.department)==null?void 0:m.name)??"—"}),e.jsx("td",{className:"border px-2 py-1",children:((p=t.designation)==null?void 0:p.title)??"—"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(z,{initial:t.status,onChange:()=>v(t.id)})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:t.created_at}),e.jsxs("td",{className:"border px-2 py-1 text-center space-x-1",children:[e.jsx("button",{className:"rounded bg-blue-500 cursor-pointer px-3 py-1 text-white hover:bg-blue-600",onClick:()=>y(t),children:e.jsx(I,{size:16})}),e.jsx("button",{className:"rounded bg-red-500 cursor-pointer px-3 py-1 text-white hover:bg-red-600",onClick:()=>D(t.id),children:e.jsx(L,{size:16})})]})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"border px-2 py-4 text-center",children:"No employee found."})})})]}),e.jsx("div",{className:"mb-2",children:e.jsx(k,{meta:r.meta})})]})]})]}),e.jsx(A,{open:f,onClose:()=>l(!1),onConfirm:S,title:"Confirm Deletion",description:"Are you sure you want to delete this employee?"})]})}export{re as default};
