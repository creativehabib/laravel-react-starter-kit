import{r as j,m as F,j as t}from"./app-gEeqfWsV.js";import{D as _,a as E,b as I,c as T,d as U,e as k,f as b,g as A}from"./drawer-DklCQ5oE.js";import{B as m}from"./button-BrJKK_Up.js";import{a as B}from"./employee-DLYSG5F-.js";import{S as O}from"./media-image-select-C4DsL-ee.js";import{L as P,I as L}from"./label-X3fhCJZN.js";import{I as i}from"./input-CsOS4pF1.js";import{T as z}from"./textarea-D7lnZgtz.js";import"./index-B8O15Jp6.js";import"./index-DpgCViur.js";import"./media-manager-B5nCq03O.js";import"./dialog-DW0DLHIu.js";import"./index-Bhta2kTC.js";import"./delete-dialog-BLnbMNly.js";import"./loader-circle-210M686l.js";const H={name:"",email:"",phone:"",status:!1,about:"",email_verified_at:"",created_at:"",updated_at:"",media_id:null},se=({user:s=null,media:p=[],triggerLabel:g,onClose:l})=>{const[v,a]=j.useState(!1),r=!!s,{data:c,setData:d,put:w,post:D,processing:x,reset:o,errors:h}=F(H),y=[{id:"name",label:"Name",type:"text",component:i},{id:"email",label:"Email",type:"email",component:i},{id:"phone",label:"Phone",type:"text",component:i},{id:"about",label:"About",component:z},{id:"password",label:"Password",type:"password",component:i},{id:"password_confirmation",label:"Confirm Password",type:"password",component:i}];j.useEffect(()=>{s?(a(!0),d(B(s))):Object.keys(h).length||(a(!1),o())},[s,d,o,h]);const N=e=>{const{name:n,value:u}=e.target;d(n,u)},C=e=>{(e==null?void 0:e.id)!==void 0&&d("media_id",(e==null?void 0:e.id)??null)},S=e=>{e.preventDefault();const n=r?w:D,u=r?route("users.update",s==null?void 0:s.id):route("users.store");n(u,{onSuccess:()=>{o(),a(!1),l()}})},f=()=>{a(!1),o(),l()};return console.log(c),t.jsxs(_,{open:v,onOpenChange:e=>{a(e),e||l()},direction:"right",children:[t.jsx(E,{asChild:!0,children:t.jsx(m,{className:"cursor-pointer",variant:"outline",onClick:()=>{l(),o()},children:g})}),t.jsx(I,{children:t.jsxs("form",{onSubmit:S,className:"flex flex-col h-full",children:[t.jsx(T,{className:"border-b",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs(U,{children:[r?"Edit":"New"," User"]}),t.jsx(k,{children:r?"Update user details.":"Fill in user details."})]}),t.jsx(b,{asChild:!0,children:t.jsx(m,{size:"sm",className:"cursor-pointer",variant:"ghost",onClick:f,children:"âœ•"})})]})}),t.jsxs("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[y.map(e=>{const n=e.component;return t.jsxs("div",{children:[t.jsx(P,{htmlFor:e.id,className:"mb-4",children:e.label}),t.jsx(n,{id:e.id,name:e.id,value:c[e.id],onChange:N,type:e.type||"text"}),t.jsx(L,{message:h[e.id]})]},e.id)}),t.jsx("div",{className:"mt-4",children:t.jsx(O,{onSelect:C,initial:Array.isArray(p)&&p.length>0&&c.media_id?p.find(e=>e.id===Number(c.media_id)):void 0})})]}),t.jsxs(A,{className:"border-t pt-4",children:[t.jsx(m,{type:"submit",disabled:x,className:"cursor-pointer",variant:"outline",children:x?"Saving...":r?"Update":"Save"}),t.jsx(b,{asChild:!0,children:t.jsx(m,{type:"button",variant:"outline",onClick:f,className:"cursor-pointer",children:"Cancel"})})]})]})})]})};export{se as default};
