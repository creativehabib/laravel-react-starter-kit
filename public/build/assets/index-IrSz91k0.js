import{K as I,r as a,S as n,j as e,L as T}from"./app-BE3jW3uN.js";import{A}from"./app-layout-DvWkxdXA.js";import{V as u}from"./index-DHXFUDIu.js";import{D as L}from"./delete-dialog-DFuTORB_.js";import{S as k,T as z,I as P}from"./inertia-pagination-iKyv5OIu.js";import{T as R}from"./toggle-D-woffNC.js";import{EmployeeDrawer as V}from"./form-D3dlP6A3.js";import{g as q}from"./employee-C_ZQLp6F.js";import{I as F}from"./input-mZcnD0xA.js";import{d as K}from"./debounce-BEvoF7qA.js";import{S as O}from"./search-CXLL6GY9.js";import"./button-6qztjmr2.js";import"./index-DlbFKtQ0.js";import"./index-BsBX4B_F.js";import"./index-xRORodtm.js";import"./floating-ui.react-dom-HEeyXpNB.js";import"./app-logo-icon-Dm77PiVG.js";import"./dialog-BDUrebJL.js";import"./label-DvpFpQJ7.js";import"./textarea-CTikqDMl.js";import"./media-image-select-BzMNvjTK.js";import"./media-manager-D4aCASZR.js";import"./loader-circle-O5DixKf0.js";const U=[{title:"Employees",href:"/employees"}];function me(){const{flash:s,employees:o,departments:j,designations:f,media:g}=I().props,[b,i]=a.useState(null),[N,l]=a.useState(!1),[d,y]=a.useState(null),S=t=>i(t),v=t=>{y(t),l(!0)},D=()=>{d!==null&&(n.delete(route("employees.destroy",d),{preserveScroll:!0,preserveState:!0,only:["employees","flash"]}),l(!1))},C=t=>{n.post(route("employees.toggle-status",t),{},{only:["employees","flash"],preserveScroll:!0,preserveState:!0})},w=a.useRef(K(t=>{const r={};t.trim()!==""&&(r.search=t),n.get("/employees",r,{preserveState:!0,replace:!0})},500)).current,E=t=>{const r=t.target.value;w(r)};return a.useEffect(()=>{s!=null&&s.success&&u.success(s.success),s!=null&&s.error&&u.error(s.error)},[s]),e.jsxs(e.Fragment,{children:[e.jsxs(A,{breadcrumbs:U,children:[e.jsx(T,{title:"Employees"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative md:w-1/4",children:[e.jsx(F,{id:"search",className:"peer ps-9",placeholder:"Search...",type:"text",onChange:E}),e.jsx("div",{className:"text-muted-foreground/80 pointer-events-none absolute inset-y-0 start-0 flex items-center justify-center ps-3 peer-disabled:opacity-50",children:e.jsx(O,{size:16,"aria-hidden":"true"})})]}),e.jsx(V,{employee:b,triggerLabel:"Add Employee",departments:j,designations:f,media:g,onClose:()=>i(null)})]}),e.jsxs("div",{className:"overflow-hidden rounded-lg border",children:[e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-700 text-white",children:[e.jsx("th",{className:"border p-2",children:"#"}),e.jsx("th",{className:"border p-2",children:"Image"}),e.jsx("th",{className:"border p-2 text-start",children:"Name"}),e.jsx("th",{className:"border p-2 text-start",children:"Department"}),e.jsx("th",{className:"border p-2",children:"Designation"}),e.jsx("th",{className:"border p-2",children:"Status"}),e.jsx("th",{className:"border p-2",children:"Created At"}),e.jsx("th",{className:"border p-2",children:"Actions"})]})}),e.jsx("tbody",{children:o.data.length>0?o.data.map((t,r)=>{var c,m,p,x,h;return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:o.meta.from+r}),e.jsx("td",{className:"border px-2 py-1 text-center flex justify-center items-center",children:e.jsx("img",{src:q((c=t.media)==null?void 0:c.path,400,300,((m=t.media)==null?void 0:m.name)||"No Image"),alt:(p=t.media)==null?void 0:p.name,className:"h-10 w-10 rounded-full"})}),e.jsx("td",{className:"border px-2 py-1",children:t.name}),e.jsx("td",{className:"border px-2 py-1",children:((x=t.department)==null?void 0:x.name)??"—"}),e.jsx("td",{className:"border px-2 py-1",children:((h=t.designation)==null?void 0:h.title)??"—"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(R,{initial:t.status,onChange:()=>C(t.id)})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:t.created_at}),e.jsxs("td",{className:"border px-2 py-1 text-center space-x-1",children:[e.jsx("button",{className:"rounded bg-blue-500 cursor-pointer px-3 py-1 text-white hover:bg-blue-600",onClick:()=>S(t),children:e.jsx(k,{size:16})}),e.jsx("button",{className:"rounded bg-red-500 cursor-pointer px-3 py-1 text-white hover:bg-red-600",onClick:()=>v(t.id),children:e.jsx(z,{size:16})})]})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"border px-2 py-4 text-center",children:"No employee found."})})})]}),e.jsx("div",{className:"mb-2",children:e.jsx(P,{meta:o.meta})})]})]})]}),e.jsx(L,{open:N,onClose:()=>l(!1),onConfirm:D,title:"Confirm Deletion",description:"Are you sure you want to delete this employee?"})]})}export{me as default};
