import{r as p,K as C,m as T,j as e}from"./app-Cjq8SBLx.js";import{V as x,B as h}from"./index-BjjQ40rK.js";import{D as F,a as I,b as L,c as N,d as S,e as y,f as B}from"./dialog-Di0fakVH.js";import{I as O}from"./input-BiSlix6O.js";import{L as f,I as j}from"./label-BKZoozZZ.js";import{T as A}from"./textarea-DDkOK7Tj.js";import{L as R}from"./loader-circle-BheouG09.js";import"./index-CNJ0VXdY.js";import"./index-CmgH_9EE.js";function J({designation:t,onClose:m}){const i=!!t,o=p.useRef(!1),[g,a]=p.useState(!1),{flash:s}=C().props,{data:u,setData:n,post:D,put:v,processing:l,errors:c,reset:d}=T({title:"",description:""}),b=r=>{r.preventDefault();const w=i?v:D,E=i?route("designations.update",t==null?void 0:t.id):route("designations.store");w(E,{onSuccess:()=>{d(),a(!1),m()}})};return p.useEffect(()=>{t?(a(!0),n({title:t.title,description:t.description||""})):Object.keys(c).length||(a(!1),d()),s!=null&&s.success&&!o.current&&(x.success(s.success),o.current=!0),s!=null&&s.error&&!o.current&&(x.error(s.error),o.current=!0)},[t,n,d,s,c]),e.jsxs(F,{open:g,onOpenChange:r=>{a(r),r||m()},children:[e.jsx(I,{asChild:!0,children:!i&&e.jsx(h,{variant:"outline",className:"cursor-pointer",children:"Add Designation"})}),e.jsxs(L,{className:"sm:max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs(N,{children:[e.jsxs(S,{children:[i?"Edit":"Add"," Designation"]}),e.jsx(y,{children:i?"Update the designation details.":"Provide a name and description."})]}),e.jsxs("form",{className:"grid gap-4",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"title",children:"Title"}),e.jsx(O,{id:"title",value:u.title,onChange:r=>n("title",r.target.value),disabled:l}),e.jsx(j,{message:c.title})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"description",children:"Description"}),e.jsx(A,{id:"description",value:u.description,onChange:r=>n("description",r.target.value),disabled:l,rows:4}),e.jsx(j,{message:c.description})]}),e.jsx(B,{children:e.jsxs(h,{type:"submit",disabled:l,children:[l&&e.jsx(R,{className:"animate-spin h-4 w-4 mr-2"}),i?"Update":"Save"]})})]})]})]})}export{J as DialogDemo};
