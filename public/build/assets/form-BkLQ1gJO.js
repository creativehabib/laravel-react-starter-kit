import{r as v,m as P,j as e}from"./app-BgNDwZ8M.js";import{B as p}from"./button-B7I_oUCn.js";import{D as A,a as I,b as T,c as O,d as G,e as J,f as y,g as L}from"./drawer-D3uQxcUZ.js";import{I as n}from"./input-DRda3HdX.js";import{L as h,I as u}from"./label-B2v9imUm.js";import{T as g}from"./textarea-CT-UzPQw.js";import{T as U}from"./toggle-Dki77s4Q.js";import{t as V}from"./employee-DLYSG5F-.js";import{S as z}from"./media-image-select-DE-euO81.js";import"./index-BvTOliF2.js";import"./index--ppQnUzu.js";import"./media-manager-VswkCiq-.js";import"./dialog-DSI7wRy1.js";import"./index-CCsudUYX.js";import"./delete-dialog-14J6lZ2_.js";import"./search-D-O69mCJ.js";import"./loader-circle-CniW-5ON.js";const H={name:"",email:"",phone:"",position:"",department_id:"",designation_id:"",user_id:"",pf_number:"",joining_date:"",date_of_birth:"",blood_group:"",emergency_contact:"",bank_account_number:"",bank_name:"",verify:"",media_id:null,status:!0,present_address:"",permanent_address:"",about:""};function ie({employee:a=null,departments:N=[],designations:E=[],media:x=[],triggerLabel:D,onClose:m}){const s=!!a,[C,i]=v.useState(!1),{data:r,setData:l,post:w,put:S,processing:_,reset:d,errors:o}=P(H),k=[{id:"name",label:"Name",type:"text",component:n,placeholder:"Enter Name"},{id:"email",label:"Email",type:"email",component:n,placeholder:"Enter Email"},{id:"position",label:"Position",type:"text",component:n,placeholder:"Enter Position"},{id:"phone",label:"Phone",type:"text",component:n,placeholder:"Enter Phone"},{id:"present_address",label:"Present Address",component:g,placeholder:"Enter Present Address"},{id:"permanent_address",label:"Permanent Address",component:g,placeholder:"Enter Permanent Address"},{id:"bank_account_number",label:"Bank Account Number",type:"text",component:n,placeholder:"Enter Bank Account Number"},{id:"bank_name",label:"Bank Name",type:"text",component:n,placeholder:"Enter Bank Name"},{id:"pf_number",label:"PF Number",type:"text",component:n,placeholder:"Enter PF Number"},{id:"date_of_birth",label:"Date of Birth",type:"date",component:n,placeholder:"Select Date of Birth"},{id:"joining_date",label:"Joining Date",type:"date",component:n,placeholder:"Select Joining Date"},{id:"blood_group",label:"Blood Group",type:"text",component:n,placeholder:"Enter Blood Group"},{id:"verify",label:"Verify",type:"text",component:n,placeholder:"Enter Verification Info"},{id:"emergency_contact",label:"Emergency Contact",type:"text",component:n,placeholder:"Enter Emergency Contact"},{id:"about",label:"About",component:g,placeholder:"Write something about the employee"}];v.useEffect(()=>{a?(i(!0),l(V(a))):Object.keys(o).length||(i(!1),d())},[a,o,d,l]);const b=t=>{const{name:c,value:j}=t.target;l(c,j)},F=t=>{t.preventDefault();const c=s?S:w,j=s?route("employees.update",a==null?void 0:a.id):route("employees.store");c(j,{onSuccess:()=>{d(),i(!1),m()}})},B=t=>{(t==null?void 0:t.id)!==void 0&&l("media_id",(t==null?void 0:t.id)??null)},f=()=>{d(),i(!1),m()};return e.jsxs(A,{open:C,onOpenChange:t=>{i(t),t||m()},direction:"right",children:[e.jsx(I,{asChild:!0,children:e.jsx(p,{className:"cursor-pointer",variant:"outline",onClick:()=>{m(),d()},children:D})}),e.jsx(T,{className:"h-screen w-full ml-auto",children:e.jsxs("form",{onSubmit:F,className:"flex flex-col h-full",children:[e.jsx(O,{className:"border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(G,{children:[s?"Edit":"New"," Employee"]}),e.jsx(J,{children:s?"Update employee details.":"Fill in employee details."})]}),e.jsx(y,{asChild:!0,children:e.jsx(p,{size:"sm",className:"cursor-pointer",variant:"ghost",onClick:f,children:"âœ•"})})]})}),e.jsxs("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[k.map(t=>{const c=t.component;return e.jsxs("div",{className:"mb-4",children:[e.jsx(h,{htmlFor:t.id,className:"mb-2 block",children:t.label}),e.jsx(c,{id:t.id,name:t.id,value:r[t.id],onChange:b,type:t.type||"text",placeholder:t.placeholder}),e.jsx(u,{message:o[t.id]})]},t.id)}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"department_id",children:"Department"}),e.jsxs("select",{id:"department_id",name:"department_id",value:r.department_id,onChange:b,className:"w-full border rounded-md p-2",children:[e.jsx("option",{value:"",children:"Select Department"}),N.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(u,{message:o.department_id})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"designation_id",children:"Designation"}),e.jsxs("select",{id:"designation_id",name:"designation_id",value:r.designation_id,onChange:b,className:"w-full border rounded-md p-2",children:[e.jsx("option",{value:"",children:"Select Designation"}),E.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))]}),e.jsx(u,{message:o.designation_id})]}),e.jsx("div",{className:"mt-4",children:e.jsx(z,{onSelect:B,initial:Array.isArray(x)&&x.length>0&&r.media_id?x.find(t=>t.id===Number(r.media_id)):void 0})}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{children:[e.jsx(h,{htmlFor:"status",children:"Status"}),e.jsx(U,{initial:!!Number(r.status),onChange:t=>l("status",t)}),e.jsx(u,{message:o.status})]})})]}),e.jsxs(L,{className:"border-t pt-4",children:[e.jsx(p,{type:"submit",disabled:_,className:"cursor-pointer",variant:"outline",children:_?"Saving...":s?"Update":"Save"}),e.jsx(y,{asChild:!0,children:e.jsx(p,{type:"button",variant:"outline",onClick:f,className:"cursor-pointer",children:"Cancel"})})]})]})})]})}export{ie as EmployeeDrawer};
