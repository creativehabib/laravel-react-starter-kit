import{r as m,K as C,m as N,j as e}from"./app-1oEnDyEf.js";import{V as x,B as h}from"./index-MB3xdT6E.js";import{D as F,a as I,b as L,c as S,d as T,e as y,f as B}from"./dialog-DEBuv2dk.js";import{I as O}from"./input-COHnMWZQ.js";import{L as g,I as f}from"./label-Bfw44cRY.js";import{T as A}from"./textarea-DiJuxqdG.js";import{L as R}from"./loader-circle-C6-1Bxc0.js";import"./index-Bik0y3FJ.js";import"./index-DISB0bMi.js";function J({department:r,onClose:u}){const t=!!r,a=m.useRef(!1),[j,o]=m.useState(!1),{flash:s}=C().props,{data:p,setData:n,post:D,put:v,processing:c,errors:l,reset:d}=N({name:"",description:""}),b=i=>{i.preventDefault();const w=t?v:D,E=t?route("departments.update",r==null?void 0:r.id):route("departments.store");w(E,{onSuccess:()=>{d(),o(!1),u()}})};return m.useEffect(()=>{r?(o(!0),n({name:r.name,description:r.description||""})):Object.keys(l).length||(o(!1),d()),s!=null&&s.success&&!a.current&&(x.success(s.success),a.current=!0),s!=null&&s.error&&!a.current&&(x.error(s.error),a.current=!0)},[r,n,d,s,l]),e.jsxs(F,{open:j,onOpenChange:i=>{o(i),i||u()},children:[e.jsx(I,{asChild:!0,children:!t&&e.jsx(h,{variant:"outline",className:"cursor-pointer",children:"Add Department"})}),e.jsxs(L,{className:"sm:max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs(S,{children:[e.jsxs(T,{children:[t?"Edit":"Add"," Department"]}),e.jsx(y,{children:t?"Update the department details.":"Provide a name and description."})]}),e.jsxs("form",{className:"grid gap-4",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"name",children:"Name"}),e.jsx(O,{id:"name",value:p.name,onChange:i=>n("name",i.target.value),disabled:c}),e.jsx(f,{message:l.name})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"description",children:"Description"}),e.jsx(A,{id:"description",value:p.description,onChange:i=>n("description",i.target.value),disabled:c,rows:4}),e.jsx(f,{message:l.description})]}),e.jsx(B,{children:e.jsxs(h,{type:"submit",disabled:c,children:[c&&e.jsx(R,{className:"animate-spin h-4 w-4 mr-2"}),t?"Update":"Save"]})})]})]})]})}export{J as DialogDemo};
