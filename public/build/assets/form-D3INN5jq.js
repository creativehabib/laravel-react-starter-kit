import{r as v,m as T,j as e}from"./app-BkhNUrg7.js";import{B as p}from"./button-Bz5wTkJ1.js";import{D as A,a as I,b as P,c as O,d as L,e as U,f as y,g as z}from"./drawer-B-70UvAP.js";import{I as n}from"./input-dbEh8hJo.js";import{L as u,I as h}from"./label-BlxoKABm.js";import{T as g}from"./textarea-B3hmm1XE.js";import{T as G}from"./toggle-Dkpiu9D1.js";import{t as H}from"./employee-DLYSG5F-.js";import{S as J}from"./media-image-select-DrcgpR2p.js";import"./index-egMOJ-qu.js";import"./index-BblDm5dS.js";import"./media-manager-CBa-NW73.js";import"./dialog-nH4w8Aho.js";import"./index-Dosjehms.js";import"./delete-dialog-BBIo7f1G.js";import"./loader-circle-C7S7SN6W.js";const R={name:"",email:"",phone:"",position:"",department_id:"",designation_id:"",user_id:"",pf_number:"",joining_date:"",date_of_birth:"",blood_group:"",emergency_contact:"",employee_image:"",bank_account_number:"",bank_name:"",verify:"",media_id:null,status:!0,present_address:"",permanent_address:"",about:""};function re({employee:a=null,departments:N=[],designations:D=[],media:x=[],triggerLabel:w,onClose:c}){const r=!!a,[C,o]=v.useState(!1),{data:s,setData:l,post:S,put:F,processing:_,reset:d,errors:i}=T(R),E=[{id:"name",label:"Name",type:"text",component:n},{id:"email",label:"Email",type:"email",component:n},{id:"position",label:"Position",type:"text",component:n},{id:"phone",label:"Phone",type:"text",component:n},{id:"present_address",label:"Present Address",component:g},{id:"permanent_address",label:"Permanent Address",component:g},{id:"bank_account_number",label:"Bank Account Number",type:"text",component:n},{id:"bank_name",label:"Bank Name",type:"text",component:n},{id:"pf_number",label:"PF Number",type:"text",component:n},{id:"date_of_birth",label:"Date of Birth",type:"date",component:n},{id:"joining_date",label:"Joining Date",type:"date",component:n},{id:"blood_group",label:"Blood Group",type:"text",component:n},{id:"verify",label:"Verify",type:"text",component:n},{id:"emergency_contact",label:"Emergency Contact",type:"text",component:n},{id:"about",label:"About",component:g}];v.useEffect(()=>{a?(o(!0),l(H(a))):Object.keys(i).length||(o(!1),d())},[a,i,d,l]);const b=t=>{const{name:m,value:j}=t.target;l(m,j)},k=t=>{t.preventDefault();const m=r?F:S,j=r?route("employees.update",a==null?void 0:a.id):route("employees.store");m(j,{onSuccess:()=>{d(),o(!1),c()}})},B=t=>{(t==null?void 0:t.id)!==void 0&&l("media_id",(t==null?void 0:t.id)??null)},f=()=>{d(),o(!1),c()};return e.jsxs(A,{open:C,onOpenChange:t=>{o(t),t||c()},direction:"right",children:[e.jsx(I,{asChild:!0,children:e.jsx(p,{className:"cursor-pointer",variant:"outline",onClick:()=>{c(),d()},children:w})}),e.jsx(P,{className:"h-screen w-full ml-auto",children:e.jsxs("form",{onSubmit:k,className:"flex flex-col h-full",children:[e.jsx(O,{className:"border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(L,{children:[r?"Edit":"New"," Employee"]}),e.jsx(U,{children:r?"Update employee details.":"Fill in employee details."})]}),e.jsx(y,{asChild:!0,children:e.jsx(p,{size:"sm",className:"cursor-pointer",variant:"ghost",onClick:f,children:"âœ•"})})]})}),e.jsxs("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[E.map(t=>{const m=t.component;return e.jsxs("div",{children:[e.jsx(u,{htmlFor:t.id,className:"mb-4",children:t.label}),e.jsx(m,{id:t.id,name:t.id,value:s[t.id],onChange:b,type:t.type||"text"}),e.jsx(h,{message:i[t.id]})]},t.id)}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"department_id",children:"Department"}),e.jsxs("select",{id:"department_id",name:"department_id",value:s.department_id,onChange:b,className:"w-full border rounded-md p-2",children:[e.jsx("option",{value:"",children:"Select Department"}),N.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(h,{message:i.department_id})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"designation_id",children:"Designation"}),e.jsxs("select",{id:"designation_id",name:"designation_id",value:s.designation_id,onChange:b,className:"w-full border rounded-md p-2",children:[e.jsx("option",{value:"",children:"Select Designation"}),D.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))]}),e.jsx(h,{message:i.designation_id})]}),e.jsx("div",{className:"mt-4",children:e.jsx(J,{onSelect:B,initial:Array.isArray(x)&&x.length>0&&s.media_id?x.find(t=>t.id===Number(s.media_id)):void 0})}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{children:[e.jsx(u,{htmlFor:"status",children:"Status"}),e.jsx(G,{initial:!!Number(s.status),onChange:t=>l("status",t)}),e.jsx(h,{message:i.status})]})})]}),e.jsxs(z,{className:"border-t pt-4",children:[e.jsx(p,{type:"submit",disabled:_,className:"cursor-pointer",variant:"outline",children:_?"Saving...":r?"Update":"Save"}),e.jsx(y,{asChild:!0,children:e.jsx(p,{type:"button",variant:"outline",onClick:f,className:"cursor-pointer",children:"Cancel"})})]})]})})]})}export{re as EmployeeDrawer};
